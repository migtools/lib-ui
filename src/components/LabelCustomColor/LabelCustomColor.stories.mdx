import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs/blocks';
import { LabelCustomColor } from './LabelCustomColor';
import {
  LabelCustomColorPicker,
  LabelCustomColorExamples,
  LabelCustomColorPerfTest,
} from './LabelCustomColor.stories.tsx';
import GithubLink from '../../../.storybook/helpers/GithubLink';

<Meta title="Components/LabelCustomColor" component={LabelCustomColor} />

# LabelCustomColor

A wrapper for PatternFly's <a href="https://www.patternfly.org/v4/components/label">Label</a> component that supports
arbitrary custom CSS colors (e.g. hexadecimal) and ensures text will always be readable.

Applying an arbitrary color to a label presents the possibility of unreadable text due to insufficient color contrast.
This component solves the issue by applying the given color as a border color and using the
[tinycolor2](https://www.npmjs.com/package/tinycolor2) library to determine a lightened background color and darkened
text color (if necessary) in order to reach a color contrast ratio of at least 7:1. This ratio meets the "level AAA"
requirement of the [Web Content Accessibility Guidelines (WCAG)](https://www.w3.org/WAI/WCAG21/Understanding/contrast-minimum.html).

**Note: This adjustment means that multiple labels with very similar colors (especially dark colors) may be adjusted to look almost identical.**

All props of PatternFly's Label component are supported except the `variant` prop (only the default "filled" variant is supported).

## Examples

### Arbitrary Color Picker

Choose any color here to see how the readability adjustments apply to it.

<Canvas>
  <Story story={LabelCustomColorPicker} />
</Canvas>

### Color Examples

<Canvas>
  <Story story={LabelCustomColorExamples} />
</Canvas>

### Performance Test

The component maintains a global cache of the readability adjustments it makes for each color.
If labels of the same color are rendered multiple times on a page, each color only needs to be processed once.

<Canvas>
  <Story story={LabelCustomColorPerfTest} />
</Canvas>

## Props

<ArgsTable of={LabelCustomColor} />

<GithubLink path="src/components/LabelCustomColor/LabelCustomColor.tsx" />
